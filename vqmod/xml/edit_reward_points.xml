<modification>

	<id>Edit Rewards Points</id>
	<version>300.1</version>
	<vqmver>2.6.2</vqmver>

    <!-- Admin_Language -->
    <file name="admin/language/en-gb/en-gb.php">
        <operation>
            <search position="replace" offset="1"><![CDATA[
            $_['button_reward_add']             = 'Add Reward Points';
            ]]></search>
            <add><![CDATA[
            $_['button_reward_add']             = 'Add BASF Dollars';
            $_['button_reward_remove']          = 'Remove BASF Dollars';
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            $_['tab_reward']                    = 'Reward Points';
            ]]></search>
            <add><![CDATA[
            $_['tab_reward']                    = 'BASF Dollars';
            ]]></add>
        </operation>
    </file>

    <file name="admin/language/en-gb/extension/total/reward.php">
        <operation>
            <search position="replace" offset="12"><![CDATA[
            $_['heading_title']    = 'Reward Points';
            ]]></search>
            <add><![CDATA[
            $_['heading_title']    = 'BASF Dollars';

            // Text
            $_['text_extension']   = 'Extensions';
            $_['text_success']     = 'Success: You have modified BASF dollars total!';
            $_['text_edit']        = 'Edit BASF Dollars Total';

            // Entry
            $_['entry_status']     = 'Status';
            $_['entry_sort_order'] = 'Sort Order';

            // Error
            $_['error_permission'] = 'Warning: You do not have permission to modify BASF dollars total!';
            ]]></add>
        </operation>
    </file>

    <file name="admin\language\en-gb\catalog\product.php">
        <operation>
            <search position="replace" offset="1"><![CDATA[
            $_['entry_points']           = 'Points';
            ]]></search>
            <add><![CDATA[
            $_['entry_points']           = 'BASF Dollars';
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            $_['entry_reward']           = 'Reward Points';
            ]]></search>
            <add><![CDATA[
            $_['entry_reward']           = 'BASF Dollars';
            ]]></add>
        </operation>

         <operation>
            <search position="replace"><![CDATA[
            $_['help_points']            = 'Number of points needed to buy this item. If you don\'t want this product to be purchased with points leave as 0.';
            ]]></search>
            <add><![CDATA[
            $_['help_points']            = 'Number of BASF Dollars needed to buy this item. To change this value, change and save the price.';
            $_['help_rewards']           = 'BASF Dollars to be added as rewards for purchasing this product.';
            ]]></add>
        </operation>
    </file>

    <file name="admin\language\en-gb\customer\customer.php">
        <operation>
            <search position="replace" offset="1"><![CDATA[
            $_['text_reward']               = 'Reward Points';
            ]]></search>
            <add><![CDATA[
            $_['text_reward']               = 'BASF Dollars';
            $_['text_reward_add']           = 'Add BASF Dollars';
            ]]></add>
        </operation>
    </file>

    <!-- Catalog_Language -->
    <file name="catalog/language/en-gb/account/reward.php">
        <operation>
            <search position="replace"><![CDATA[
            $_['heading_title']      = 'Your Reward Points';
            ]]></search>
            <add><![CDATA[
            $_['heading_title']      = 'Your BASF Dollars';
            ]]></add>
        </operation>

        <operation>
            <search position="replace" offset="6"><![CDATA[
            $_['column_points']      = 'Points';
            ]]></search>
            <add><![CDATA[
            $_['column_points']      = 'BASF Dollars';

            // Text
            $_['text_account']       = 'Account';
            $_['text_reward']        = 'BASF Dollars';
            $_['text_total']         = 'Your total number of BASF Dollars is:';
            $_['text_empty']         = 'You do not have any BASF Dollars!';
            ]]></add>
        </operation>
    </file>
    
    <file name="catalog/language/en-gb/product/product.php">
        <operation>
            <search position="replace" offset="1"><![CDATA[
            $_['text_reward']              = 'Reward Points:';
            ]]></search>
            <add><![CDATA[
            $_['text_reward']              = 'BASF Rewards:';
            $_['text_points']              = 'Price in BASF Dollars:';
            ]]></add>
        </operation>
    </file>

    <file name="catalog\language\en-gb\extension\total\reward.php">
        <operation>
            <search position="replace" offset="13"><![CDATA[
            $_['heading_title'] = 'Use Reward Points (Available %s)';
            ]]></search>
            <add><![CDATA[
            $_['heading_title'] = 'Use BASF Dollars (Available %s)';

            // Text
            $_['text_reward']   = 'BASF Dollars (%s)';
            $_['text_order_id'] = 'Order ID: #%s';
            $_['text_success']  = 'Success: Your BASF Dollars discount has been applied!';

            // Entry
            $_['entry_reward']  = 'BASF Dollars to use (Max %s)';

            // Error
            $_['error_reward']  = 'Warning: Please enter the amount of BASF Dollars to use!';
            $_['error_points']  = 'Warning: You don\'t have %s BASF Dollars!';
            $_['error_maximum'] = 'Warning: The maximum number of BASF Dollars that can be applied is %s!';
            ]]></add>
        </operation>
    </file>

    <file name="catalog\language\en-gb\checkout\cart.php">
        <operation>
            <search position="replace" offset="2"><![CDATA[
            $_['text_points']              = 'Reward Points: %s';
            ]]></search>
            <add><![CDATA[
            $_['text_points']              = 'BASF Rewards: %s';
            $_['text_next']                = 'What would you like to do next?';
            $_['text_next_choice']         = 'Choose if you have a discount code or BASF Dollars you want to use or would like to estimate your delivery cost.';
            ]]></add>
        </operation>
    </file>
    
    <!-- Admin/Catalog_Controller/Model/View -->
    <file name="catalog/model/catalog/product.php">
		<operation>
            <search position="replace"><![CDATA[
            'reward'           => $query->row['reward'],
            ]]></search>
            <add><![CDATA[
            'reward'           => ($query->row['reward'] ? $query->row['reward'] : 0),            
            ]]></add>
        </operation>
    </file>>

    <file name="catalog\controller\extension\total\reward.php">
        <operation>
            <search position="replace"><![CDATA[
            $points_total += $product['points'];
            ]]></search>
            <add><![CDATA[
            $points_total += $product['total'];
            ]]></add>
        </operation>
    </file>

    <file name="catalog\model\extension\total\reward.php">
        <operation>
            <search position="replace"><![CDATA[
            $points_total += $product['points'];
            ]]></search>
            <add><![CDATA[
            $points_total += $product['total'];
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            $discount = $product['total'] * ($this->session->data['reward'] / $points_total);
            ]]></search>
            <add><![CDATA[
            $discount = $this->session->data['reward'];
            ]]></add>
        </operation>
    </file>

    <file name="admin\view\template\catalog\product_form.twig">
        <operation>
            <search position="ibefore"><![CDATA[
             type="text" name="points" value="{{ points }}" placeholder="{{ entry_points }}" id="input-points" class="form-control" />
            ]]></search>
            <add><![CDATA[
             readonly id="basf"
            ]]></add>
        </operation>

        <operation>
            <search position="ibefore"><![CDATA[
             type="text" name="price" value="{{ price }}" placeholder="{{ entry_price }}" id="input-price" class="form-control" />
            ]]></search>
            <add><![CDATA[
             id="price" 
            ]]></add>
        </operation>
        
        <operation>
            <search position="replace"><![CDATA[
            <td class="text-right">{{ entry_reward }}</td>
            ]]></search>
            <add><![CDATA[
            <td class="text-right"><span data-toggle="tooltip" title="{{ help_rewards }}">{{ entry_reward }}</span></td>
            ]]></add>
        </operation>

        <operation>
            <search position="before"><![CDATA[
            // Category
            ]]></search>
            <add><![CDATA[
            $('#price').on('input', function(){
                var valueOfID = $(this).val();
                $('#basf').val(valueOfID);
            });
            ]]></add>
        </operation>
    </file>

</modification>